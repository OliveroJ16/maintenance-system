<div class="header">
    <div class="header-left">
        <h1 id="pageTitle">Mantenimientos</h1>
        <p id="pageDescription">Gesti√≥n de mantenimientos programados</p>
    </div>
</div>

<div class="content-area">

    <!-- üîµ PESTA√ëAS -->
    <div style="display:flex; gap:12px; margin-bottom:24px;">
        <button class="btn tab-btn btn-primary" onclick="switchTab('tab-mantenimientos')" id="tabBtn-mantenimientos">
            Mantenimientos
        </button>

        <button class="btn tab-btn btn-secondary" onclick="switchTab('tab-tipos')" id="tabBtn-tipos">
            Tipos de mantenimiento
        </button>

        <button class="btn tab-btn btn-secondary" onclick="switchTab('tab-config')" id="tabBtn-config">
            Configuraciones
        </button>
    </div>

    <!-- ------------------------------------------------------------------ -->
    <!-- üîµ TAB 1: LISTA DE MANTENIMIENTOS -->
    <!-- ------------------------------------------------------------------ -->

    <div id="tab-mantenimientos" class="section-card">

        <div class="section-header">
            <div class="section-title">
                <h2>Gesti√≥n de Mantenimientos</h2>
                <p>Consultar, programar y administrar mantenimientos</p>
            </div>

            <button class="btn btn-primary" onclick="openMaintenanceModal()">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Nuevo Mantenimiento
            </button>
        </div>

        <div class="search-bar">
            <input type="text" placeholder="Buscar mantenimiento..." onkeyup="searchMaintenance(this.value)">
        </div>

        <!-- üîµ TABLA DE MANTENIMIENTOS -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Fecha Programada</th>
                        <th>KM Programado</th>
                        <th>Fecha Ejecuci√≥n</th>
                        <th>KM Ejecuci√≥n</th>
                        <th>Estado</th>
                        <th>Veh√≠culo</th>
                        <th>Tipo Mantenimiento</th>
                        <th>Taller</th>
                    </tr>
                </thead>

                <tbody>
                    <tr th:each="m : ${maintenances}">
                        <td th:text="${m.idMaintenance}"></td>
                        <td th:text="${m.scheduledDate}"></td>
                        <td th:text="${m.scheduledKm}"></td>
                        <td th:text="${m.executionDate}"></td>
                        <td th:text="${m.executionKm}"></td>
                        <td th:text="${m.status}"></td>
                        <td th:text="${m.vehicle != null ? m.vehicle.name : '‚Äî'}"></td>
                        <td th:text="${m.maintenanceType != null ? m.maintenanceType.name : '‚Äî'}"></td>
                        <td th:text="${m.workshop != null ? m.workshop.name : 'No asignado'}"></td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div> <!-- END TAB 1 -->

    <!-- ------------------------------------------------------------------ -->
    <!-- üîµ TAB 2: TIPOS DE MANTENIMIENTO -->
    <!-- ------------------------------------------------------------------ -->

    <div id="tab-tipos" class="section-card" style="display:none;">

        <div class="section-header">
            <div class="section-title">
                <h2>Tipos de Mantenimiento</h2>
                <p>Gestiona los tipos usados en los mantenimientos</p>
            </div>

            <button class="btn btn-primary" onclick="openTypeModal()">
                <svg width="18" height="18" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Nuevo Tipo
            </button>
        </div>

        <!-- Tabla -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Categor√≠a</th>
                        <th>Prioridad</th>
                        <th>Acciones</th>
                    </tr>
                </thead>

                <tbody id="typeTableBody">
                    <tr>
                        <td><strong>Cambio de Aceite</strong></td>
                        <td>Preventivo</td>
                        <td>Media</td>
                        <td>
                            <div class="action-buttons">
                                <button class="icon-btn edit" onclick="editType(1)">‚úèÔ∏è</button>
                                <button class="icon-btn delete" onclick="deleteType(1)">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                </tbody>

            </table>
        </div>

    </div> <!-- END TAB 2 -->

    <!-- ------------------------------------------------------------------ -->
    <!-- üîµ TAB 3: CONFIGURACIONES -->
    <!-- ------------------------------------------------------------------ -->

    <div id="tab-config" class="section-card" style="display:none;">

        <div class="section-header">
            <div class="section-title">
                <h2>Configuraciones de Mantenimiento</h2>
                <p>Frecuencias por veh√≠culo y tipo</p>
            </div>
        </div>

        <p style="font-size:14px; color:#64748b; margin-bottom:20px;">
            Aqu√≠ puedes definir cada cu√°ntos KM o meses se repite un mantenimiento.
        </p>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Veh√≠culo</th>
                        <th>Tipo</th>
                        <th>KM</th>
                        <th>Meses</th>
                        <th>Acciones</th>
                    </tr>
                </thead>

                <tbody>
                    <tr>
                        <td>ABC-123</td>
                        <td>Cambio de Aceite</td>
                        <td>7000</td>
                        <td>6</td>
                        <td>
                            <button class="icon-btn edit">‚úèÔ∏è</button>
                            <button class="icon-btn delete">üóëÔ∏è</button>
                        </td>
                    </tr>
                </tbody>

            </table>
        </div>

    </div> <!-- END TAB 3 -->

</div>